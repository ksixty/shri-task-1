"use strict";var SCHEDULE_LINK="https://vanyaklimenko.ru/schedule.json",SCHEDULE_DOM=document.querySelector("#schedule"),redux={general:{schools:{},lecturers:{}},schedule:{}},fetchSchedule=function(){return new Promise(function(e,n){fetch(SCHEDULE_LINK).then(function(e){return e.json()}).then(function(n){return e(n)})["catch"](function(e){return n(e)})})};fetchSchedule().then(function(e){var n=e.schedule,t=e.general;console.log(e),redux.general.schools=t.schools,redux.general.lecturers=t.lecturers,redux.schedule=n,renderLectures()});var getMonth=function(e){if(!e)return!1;var n=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь"];return e=new Date(e),n[e.getMonth()]||!1},getDayOfTheWeek=function(e){if(!e)return!1;var n=["пн","вт","ср","чт","пт","сб","вс"],t=new Date(e).getDay();if(t>4);return n[t]},filterLectures=function(e,n){return e},renderLectures=function(e){var n=redux.schedule;if(!n)return!1;for(var t={},r=0;r<12;r++)t[r]=[];var c=[];for(var a in n){var i=n[a];c.push(i)}c.forEach(function(e){var n=e.date,r=(e.school,new Date(n).getMonth()),c=renderLecture(e),a=t[r];a.push(c),t[r]=a});for(var s in t){var u=t[s];if(u.length>0){var d=document.createElement("div");d.innerHTML='\n                <div class="schedule__month month month--expanded">\n                    <div class="schedule__title">'+getMonth(s)+"</div>\n                    "+u.join("")+"\n                </div>\n             ",SCHEDULE_DOM.appendChild(d)}}},getLecturer=function(e){var n=redux.general.lecturers,t=n[e];return{name:t.name,company:t.company||"Яндекс",bio:t.bio}},getSchool=function(e){var n=redux.general.schools;return e?n[e]:n.all},renderLecture=function(e){var n=e.school,t=e.name,r=e.lecturer,c=e.pic,a=e.date,i=e.venue,s=getLecturer(r),u='\n        <div class="schedule__event event">\n            <div class="event__header event__header--'+(n||"all")+'">\n                <div class="event__school">'+getSchool(n)+'</div>\n            </div>\n            <img class="event__pic" src="'+c+'">\n            <div class="event__title">\n                <div class="event__date">\n                    <div class="event__date-number">'+new Date(a).getDate()+'</div>\n                    <div class="event__date-week">'+getDayOfTheWeek(a)+'</div>\n                </div>\n                <div class="event__text">\n                    <div class="event__name">'+t+'</div>\n                    <div class="event__meta meta">\n                        <div class="meta__item meta__item--lecturer">'+s.name+'</div>\n                        <div class="meta__item meta__item--company">'+s.company+'</div>\n                        <div class="meta__item meta__item--place">'+i+"</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    ";return u};