"use strict";var SCHEDULE_LINK="https://vanyaklimenko.ru/schedule.json",SCHEDULE_DOM=document.querySelector("#schedule"),redux={general:{schools:{},lecturers:{}},schedule:{}},fetchSchedule=function(){return new Promise(function(e,n){fetch(SCHEDULE_LINK).then(function(e){return e.json()}).then(function(n){return e(n)})["catch"](function(e){return n(e)})})};fetchSchedule().then(function(e){var n=e.schedule,t=e.general;console.log(e),redux.general.schools=t.schools,redux.general.lecturers=t.lecturers,redux.schedule=n,renderLectures()});var getMonth=function(e){if(!e)return!1;var n=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь"];return e=new Date(e),n[e.getMonth()]||!1},getDayOfTheWeek=function(e){if(!e)return!1;var n=["пн","вт","ср","чт","пт","сб","вс"],t=new Date(e).getDay();return n[t]},filterLectures=function(e,n){return e},renderLectures=function(e){var n=redux.schedule;if(!n)return!1;for(var t={},r=0;r<12;r++)t[r]=[];var a=[];for(var c in n){var u=n[c];a.push(u)}a.forEach(function(e){var n=e.date,r=(e.school,new Date(n).getMonth()),a=renderLecture(e),c=t[r];c.push(a),t[r]=c});for(var o in t){var i=t[o];if(i.length>0){var s=document.createElement("div");s.innerHTML='\n                <div class="schedule__month month month--expanded">\n                    <div class="schedule__title">'+getMonth(o)+"</div>\n                    "+i.join("")+"\n                </div>\n             ",SCHEDULE_DOM.appendChild(s)}}},getLecturer=function(e){var n=redux.general.lecturers,t=n[e];return{name:t.name,company:t.company||"Яндекс",bio:t.bio}},getSchool=function(e){var n=redux.general.schools;return e?n[e]:n.all},renderLecture=function(e){var n=e.school,t=e.name,r=e.lecturer,a=e.pic,c=e.date,u=e.venue,o=getLecturer(r),i='\n        <div class="schedule__event event">\n            <div class="event__header event__header--'+(n||"all")+'">\n                <div class="event__school">'+getSchool(n)+'</div>\n            </div>\n            <img class="event__pic" src="'+a+'">\n            <div class="event__title">\n                <div class="event__date">'+new Date(c).getDate()+'</div>\n                <div class="event__date">'+getDayOfTheWeek(c)+'</div>\n                <div class="event__name">'+t+'</div>\n            </div>\n            <div class="event__meta meta">\n                <div class="meta__item meta__item--lecturer">'+o.name+'</div>\n                <div class="meta__item meta__item--company">'+o.company+'</div>\n                <div class="meta__item meta__item--place">'+u+"</div>\n            </div>\n        </div>\n    ";return i};$(document).ready(function(){$(document).on("mouseover mouseout","a",function(e){var n=$(this).attr("href");n&&"#"!=n&&$("a").filter('[href="'+$(this).attr("href")+'"]').toggleClass("hover","mouseover"==e.type)})});